{"version":3,"sources":["webpack:///./src/pages/eat/index.vue","webpack:///./src/config/index.js","webpack:///./src/pages/eat/main.js","webpack:///src/pages/eat/index.vue","webpack:///./src/pages/eat/index.vue?8db0","webpack:///./src/utils/index.js","webpack:///./src/pages/eat/index.vue?565f"],"names":["host","config","service","submitEatRecord","getHistory","uploadImgPath","downLoadImgPath","api","test","requestMap","getLocationInfo","module","exports","app","$mount","formatTime","year","date","getFullYear","month","getMonth","day","getDate","hour","getHours","minute","getMinutes","second","getSeconds","map","formatNumber","join","n","toString","showBusy","wx","showToast","title","text","icon","duration","showSuccess","showModel","content","hideToast","showModal","showCancel"],"mappings":"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ACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,sCAAsC,QAAQ;AAC9C;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,C","file":"static/js/eat.js","sourcesContent":["var disposed = false\nfunction injectStyle (ssrContext) {\n  if (disposed) return\n  require(\"!!../../../node_modules/.npminstall/extract-text-webpack-plugin/2.1.2/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":false,\\\"sourceMap\\\":false}!../../../node_modules/.npminstall/mpvue-loader/1.0.4/mpvue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5eee63ef\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rpx-loader?{\\\"baseDpr\\\":1,\\\"rpxUnit\\\":0.5}!postcss-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.npminstall/mpvue-loader/1.0.4/mpvue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/.npminstall/mpvue-loader/1.0.4/mpvue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/.npminstall/mpvue-loader/1.0.4/mpvue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/.npminstall/mpvue-loader/1.0.4/mpvue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5eee63ef\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/.npminstall/mpvue-loader/1.0.4/mpvue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5eee63ef\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\nComponent.options.__file = \"src/pages/eat/index.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== \"default\" && key.substr(0, 2) !== \"__\"})) {console.error(\"named exports are not supported in *.vue files.\")}\nif (Component.options.functional) {console.error(\"[vue-loader] index.vue: functional components are not supported with templates, they should use render functions.\")}\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-loader/node_modules/vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-5eee63ef\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-5eee63ef\", Component.options)\n  }\n  module.hot.dispose(function (data) {\n    disposed = true\n  })\n})()}\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/eat/index.vue\n// module id = 48\n// module chunks = 3","/**\n * 小程序配置文件\n */\n\n// 此处主机域名修改成腾讯云解决方案分配的域名\n//dev\n// var host = 'https://bcubkqku.qcloud.la';\n\nvar host = 'https://228070574.fxclyp.club';\n\nvar config = {\n\n    // 下面的地址配合云端 Demo 工作\n    service: {\n        host,\n\n        // 吃饭打卡\n        submitEatRecord: `${host}/weapp/eat/submit`,\n\n        getHistory: `${host}/weapp/eat/gethistory`,\n\n        //\n        //上传图片\n        uploadImgPath: `${host}/weapp/upload`,\n\n        // downLoadImgPath: `https://miss-1252083442.cosbj.myqcloud.com/\n        downLoadImgPath: 'https://miss-1252083442.cos.ap-beijing.myqcloud.com/'\n    },\n    api: {\n        //test\n        test: `${host}/weapp/test`,\n\n        //request map api\n        requestMap: `${host}/weapp/eat/map`,\n        //map aip\n        getLocationInfo: 'https://apis.map.qq.com/ws/geocoder/v1/?location='\n    }\n};\n\nmodule.exports = config;\n\n\n\n// WEBPACK FOOTER //\n// ./src/config/index.js","import Vue from 'vue'\nimport App from './index'\n\nconst app = new Vue(App)\napp.$mount()\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/eat/main.js","<template>\n    <div class=\"main-layout\">\n        <div class=\"record-page\" v-show=\"!isEditModel\">\n            <button class=\"eat-record-button\" @click=\"recordEat()\" >吃饭打卡</button>\n            <button class=\"view-history-button\" @click=\"getHistory()\">查看记录</button>\n\n            <div class=\"view-history-layout\">\n                <div class=\"record-item\" v-for=\"record in historyRecordList\" :key=\"record.time\" :style=\"{backgroundImage: 'url(' + record.imgList[0] + ')'}\">\n                    <div class=\"record-item-wrap\">\n                        <p class=\"record-words\">{{record.wordsToLynn}}</p>\n\n                        <div class=\"date-info\">\n                            <p class=\"record-time\">{{record.time}}</p>\n                            <p class=\"record-position\"><span><img :src=\"locationIconSrcWhite\"></span>{{record.location}}</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        \n\n        <div class=\"edit-layout\" v-show=\"isEditModel\">\n            <div class=\"textarea-box\">\n                <textarea placeholder=\"给老公的留言~\" v-model=\"recordContent.wordsToLynn\"></textarea>\n                <!-- <textarea placeholder=\"留言~\" :value=\"recordContent.wordsToLynn\"></textarea> -->\n            </div>\n            <div class=\"location-box\">\n                <span><img :src=\"locationIconSrc\"></span>\n                <!-- {{locationString === '' ? '正在获取老婆定位...' : locationString}} -->\n                <span v-if=\"locationString === ''\">正在获取老婆定位...</span>\n                <span v-if=\"locationString !== ''\">{{locationString}}</span>\n            </div>\n            <h4 class=\"eat-title\">皂片<small>我有好好吃饭捏~</small></h4>\n            \n            <div class=\"record-img-preview-layout\">\n                <div class=\"img-item\" v-for=\"(item, index) in recordContent.recordImgPreviewList\" :key=\"item.src\">\n                    <div class=\"remove-img\" @click=\"removeItem(index)\"></div>\n                    <img :src=\"item.src\" alt=\"\"  class=\"img-preview-item\" >\n                </div>\n\n                <div class=\"img-item\" @click=\"addImg()\">\n                    <div class=\"img-wrapper\">\n                        <img :src=\"addIconSrc\" alt=\"\" class=\"img-preview-item add-img-button\" >\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"submit-layout\">\n                <button class=\"submit-record\" @click=\"submitRecord()\">提交给老公</button>\n                <!-- <button class=\"submit-record\" @click=\"submitRecord()\">提交</button> -->\n                <button class=\"submit-return\" type=\"success\" @click=\"submitReturn()\">返回</button>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n\nimport Config from '../../config'\nimport { formatTime, showBusy, showSuccess, showModel } from '../../utils'\n\nexport default {\n    created() {\n        this.getLocation();\n    },\n    data() {\n        return {\n            addIconSrc: 'http://7xwgqm.com1.z0.glb.clouddn.com/add.png',\n            locationIconSrc: 'http://7xwgqm.com1.z0.glb.clouddn.com/wxb%E5%AE%9A%E4%BD%8D.png',\n            locationIconSrcWhite: 'http://7xwgqm.com1.z0.glb.clouddn.com/wxb%E5%AE%9A%E4%BD%8D%20%281%29.png',\n            locationString: '',\n            isEditModel: false,\n            recordContent: {\n                recordImgPreviewList: [],\n                wordsToLynn: 'Dear 老公 :\\n'\n                // wordsToLynn: ''\n            },\n            historyRecordList: []\n        }\n    },\n    methods: {\n        getNewPhoto() {\n            let _this = this;\n            wx.chooseImage({\n                sizeType: ['compressed'],\n                success: function(tempFilePaths) {\n                    _this.isEditModel = true;\n                    // 拿到图片路径，进行预览，提交上传 。结束 提示语 打卡成功提示： 宝宝吃饱辣,已上传给老公审批！！\n                    let imgPathList = tempFilePaths.tempFilePaths;\n                    imgPathList.forEach(item => {\n                        _this.recordContent.recordImgPreviewList.push({\n                            src: item\n                        });\n                    })\n\n                },\n                fail: function() {\n\n                }\n            })\n        },\n        recordEat() {\n            let _this = this;\n            wx.vibrateShort()\n            this.getNewPhoto();\n        },\n        removeItem(index) {\n            this.recordContent.recordImgPreviewList.splice(index, 1);\n        },\n        addImg() {\n            this.getNewPhoto();\n        },\n        getLocation() {\n            let _this = this;\n            console.log('getLocation');\n            wx.getLocation({\n                type: 'gcj02', //返回可以用于wx.openLocation的经纬度\n                success: function(res) {\n                    var latitude = res.latitude\n                    var longitude = res.longitude\n                    console.log(latitude, longitude, 123);\n\n                    _this._request({\n                        url: Config.api.requestMap,\n                        method: 'get',\n                        data: {\n                            location: latitude + ',' + longitude\n                        },\n                        success: (res) => {\n                            console.log(res.data);\n                            if (res.data.status === 'success') {\n                                _this.locationString = res.data.location\n                                console.log('change', _this.locationString)\n                            }\n                            \n                        },\n                        fail: (res) => {\n                            console.log('定位失败，请老婆打开定位');\n                        }\n                    })\n                },\n                fail: () => {\n                    console.log('fail')\n                }\n            })\n        },\n        _request(opts) {\n            return wx.request(opts);\n        },\n        async submitRecord() {\n            let _this = this\n            let location = this.locationString;\n            let wordsToLynn = this.recordContent.wordsToLynn;\n            let imgList = this.recordContent.recordImgPreviewList;\n\n            if (imgList.length === 0) {\n                wx.vibrateLong()\n                showModel('打卡失败', '老婆要拍照才能上传捏')\n                return false\n            }\n            showBusy('打卡中')\n\n            let result = await this.uploadImgList(imgList)\n\n            if (result.status === 'success') {\n                // showSuccess('图片上传成功')\n            } else {\n                wx.vibrateLong()\n                showModel('图片上传失败', result.err)\n                return false;\n            } \n\n            let uploadFileList = []\n\n            for (let item of result.data) {\n                if (item.statusCode === 413) {\n                    showModel('图片过大', item.data)\n                    return false;\n                }\n                let data = JSON.parse(item.data).data.imgKey\n\n                uploadFileList.push(Config.service.downLoadImgPath + data)\n            }\n\n            let requestData = {\n                wordsToLynn: wordsToLynn,\n                location: location,\n                imgList: uploadFileList\n            }\n\n            this._request({\n                url: Config.service.submitEatRecord,\n                method: 'post',\n                data: {\n                    recordData: requestData\n                },\n                success: (res) => {\n                    _this.submitSuccess(res)\n                },\n                fail: (err) => {    \n                    _this.submitFail(err)\n                }\n            })\n\n        },\n        async uploadImgList(imgList) {\n            let _this = this;\n            return new Promise((_resolve, _reject) => {\n                console.log('upload')\n                let syncTaskQueue = [];\n                let result;\n                \n                console.log(imgList)\n                for (let i = 0; i < imgList.length; i++) {\n                    syncTaskQueue.push(new Promise((resolve, reject) => {\n                        _this.wxUploadImg(imgList[i].src, resolve, reject);\n                    }));\n                }\n    \n                Promise.all(syncTaskQueue)\n                .then(results => {\n                    console.log(results);\n                    _resolve({\n                        status: 'success',\n                        data: results\n                    });\n                }).catch(err => {\n                    console.log(err)\n                    _reject({\n                        status: 'failed'\n                    })\n                });\n\n            });\n\n\n        },\n        wxUploadImg(imgTempPath, resolve, reject) {\n            console.log('upload file11', imgTempPath)\n            wx.uploadFile({\n                url: Config.service.uploadImgPath,\n                filePath: imgTempPath,\n                name: 'file',\n                // header: {\n                //     \"content-type\": \"multipart/form-data\"\n                // },\n                //取一个独特的名字\n                // name: new Date().getTime() + '',\n                success: (res) => {\n                    console.log(res);\n                    resolve(res);\n                },\n                fail: (err) => {\n                    console.log(err);\n                    reject(err);\n                }\n            })\n        },\n        submitReturn() {\n            this.isEditModel = false\n        },\n        submitSuccess(res) {\n            console.log(res)\n            wx.vibrateLong()\n            if (res.data.status ==='success') {\n                showSuccess('打卡成功')\n                this.historyRecordList = []\n                this.getHistory()\n                this.isEditModel = false\n            } else {\n                showModel('打卡失败', 'err: ' + res.err)\n            }\n        },\n        submitFail(err) {\n            wx.vibrateLong()\n            showModel('打卡失败', '上传出错')\n        },\n        getHistory() {\n            let _this = this\n            showBusy('正在获取记录')\n            this._request({\n                url: Config.service.getHistory,\n                method: 'get',\n                success: (res) => {\n                    console.log(res.data)\n                    if (res.data.status === 'success') {\n                        showSuccess('获取成功')\n                        _this.historyRecordList = []\n    \n                        res.data.data.result.forEach(item => {\n                            _this.historyRecordList.push({\n                                imgList: item.imglist.split(':||:'),\n                                location: item.location,\n                                wordsToLynn: item.wordstolynn,\n                                time: item.time\n                            })\n                        })\n                    } else {\n                        showModel('获取失败', '请求出错，请重新获取')\n                    }\n                }\n            })\n        }\n        \n    }\n}\n</script>\n\n<style scoped>\n    .record-words {\n        margin: 20rpx;\n        padding: 20rpx\n    }\n    .record-position img {\n        width: 36rpx;\n        height: 36rpx;\n        margin-right: 10rpx\n    }\n    .record-item-wrap {\n        background: rgba(66,66,66,.4);\n        height: 100%;\n        position: relative;\n        box-sizing: border-box;\n    }\n    .date-info {\n        position: absolute;\n        bottom: 0;\n        right: 0;\n        text-align: right\n    }\n    .record-item-wrap p {\n        font-size: 36rpx;\n        font-weight: 200;\n        color: rgb(245,245,245)\n    }\n    .record-item {\n        width: 100%;\n        height: 400rpx;\n        background-size: cover;\n        background-position: center;\n        margin-top: 20rpx;\n    }\n    .record-page {\n        width: 100%;\n    }\n    .record-page .view-history-button {\n        width: 80%;\n        margin: auto auto;\n    }\n    .location-box {\n        margin-top: 20rpx;\n        height: 70rpx;\n        box-sizing: border-box;\n    }\n\n    .location-box span {\n        font-size: 34rpx;\n        color: rgb(100, 100, 100);\n        font-weight: 200;\n        display: inline-block;\n        height: 70rpx;\n        line-height: 70rpx;\n        padding-top: -10rpx;\n        /* position: absolute;\n        top: 0;\n        left: 0;\n        transform: translateX(-50%) translateY(-50%); */\n    }\n    .location-box img{\n        width: 40rpx;\n        height: 40rpx;\n        opacity: 0.8;\n        margin-right: 10rpx;\n        display: inline-block;\n    }\n    .main-layout {\n        margin-bottom: 100px;\n        height:100%;\n        padding-bottom:200rpx;\n        /* height: 1200rpx; */\n    }\n    .conatiner {\n        height: 100%;\n        border: solid\n    }\n    .eat-record-button {\n        width:200rpx;\n        height:200rpx;\n        margin:100rpx auto;\n        border-radius:50%;\n        -webkit-box-shadow:0 0 1rpx 1rpx #ccc;\n        box-shadow:0 0 30rpx 5rpx #ccc;\n        background:rgba(91,194,72,.7);\n        font-size:35rpx;\n        line-height:100px;\n        transition: all .3s ease;\n    }\n    .eat-record-button:hover {\n        transform: scale(1.2)\n    }\n    .record-img-preview-layout {\n        display: flex;\n        flex-wrap: wrap;\n    }\n    .img-item {\n        margin: 5px;\n        position: relative;\n    }\n    .remove-img {\n        position:absolute;\n        width:30rpx;\n        height:30rpx;\n        top:-5rpx;\n        right:-5rpx;\n        border-radius:50%;\n        background-image:url(http://7xwgqm.com1.z0.glb.clouddn.com/close1.png);\n        background-size:cover;\n        z-index:99;\n        opacity:0.7;\n        box-shadow:1px 1px 10px #000;\n    }\n    .img-preview-item {\n        width: 216rpx;\n        height: 384rpx;\n        border: 2px solid #ccc;\n        border-radius: 10px;\n        overflow: hidden;\n    }\n    .img-wrapper {\n        width:216rpx;\n        border:2px solid #ccc;\n        height:384rpx;\n        position:relative;\n        border-radius: 10px;\n    }\n    .add-img-button {\n        width:100rpx;\n        height:100rpx;\n        opacity:0.3;\n        position:absolute;\n        left:50%;\n        top:50%;\n        margin-left:-55rpx;\n        margin-top:-55rpx;\n        border: none;\n        border-radius: 10px;\n        overflow: hidden;\n    }\n    .edit-layout {\n        margin:60rpx;\n    }\n    .textarea-box {\n        border:1px solid #ccc;\n        border-radius:20rpx;\n        padding: 20rpx\n    }\n    .textarea-box textarea {\n        width:100%;\n        font-size: 32rpx;\n        color: rgb(66, 66, 66);\n    }\n    .eat-title {\n        font-size: 40rpx;\n        color: rgb(66, 66, 66);\n        font-weight: 200;\n        margin-top: 20px;\n    }\n    small {\n        display: inline;\n        margin-left: 10px;\n        font-size: 20rpx;\n    }\n    .submit-record {\n        margin: 20px 20px 10px;\n        background: #4ec922;\n        color: #ffffffec;\n    }\n    .submit-return {\n        margin: 10px 20px 20px 20px;\n    }\n</style>\n\n\n\n\n\n// WEBPACK FOOTER //\n// src/pages/eat/index.vue?c297a9e0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.npminstall/extract-text-webpack-plugin/2.1.2/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/.npminstall/vue-style-loader/3.1.2/vue-style-loader!./~/.npminstall/css-loader/0.28.10/css-loader?{\"minimize\":false,\"sourceMap\":false}!./~/.npminstall/mpvue-loader/1.0.4/mpvue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-5eee63ef\",\"scoped\":true,\"hasInlineConfig\":false}!./~/.npminstall/px2rpx-loader/0.1.8/px2rpx-loader?{\"baseDpr\":1,\"rpxUnit\":0.5}!./~/.npminstall/postcss-loader/2.1.1/postcss-loader/lib?{\"sourceMap\":true}!./~/.npminstall/mpvue-loader/1.0.4/mpvue-loader/lib/selector.js?type=styles&index=0!./src/pages/eat/index.vue\n// module id = 68\n// module chunks = 3","const formatTime = date => {\n  const year = date.getFullYear()\n  const month = date.getMonth() + 1\n  const day = date.getDate()\n  const hour = date.getHours()\n  const minute = date.getMinutes()\n  const second = date.getSeconds()\n\n  return [year, month, day].map(formatNumber).join('/') + ' ' + [hour, minute, second].map(formatNumber).join(':')\n}\n\nconst formatNumber = n => {\n  n = n.toString()\n  return n[1] ? n : '0' + n\n}\n\n\n// 显示繁忙提示\nvar showBusy = text => wx.showToast({\n    title: text,\n    icon: 'loading',\n    duration: 10000\n})\n\n// 显示成功提示\nvar showSuccess = text => wx.showToast({\n    title: text,\n    icon: 'success'\n})\n\n// 显示失败提示\nvar showModel = (title, content) => {\n    wx.hideToast();\n\n    wx.showModal({\n        title,\n        content: JSON.stringify(content),\n        showCancel: false\n    })\n}\n\nexport {\n  formatTime,\n  formatNumber,\n  showBusy,\n  showSuccess,\n  showModel\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/index.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"main-layout\"\n  }, [_c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.isEditModel),\n      expression: \"!isEditModel\"\n    }],\n    staticClass: \"record-page\"\n  }, [_c('button', {\n    staticClass: \"eat-record-button\",\n    attrs: {\n      \"eventid\": '0'\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.recordEat()\n      }\n    }\n  }, [_vm._v(\"吃饭打卡\")]), _vm._v(\" \"), _c('button', {\n    staticClass: \"view-history-button\",\n    attrs: {\n      \"eventid\": '1'\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.getHistory()\n      }\n    }\n  }, [_vm._v(\"查看记录\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"view-history-layout\"\n  }, _vm._l((_vm.historyRecordList), function(record, index) {\n    return _c('div', {\n      key: record.time,\n      staticClass: \"record-item\",\n      style: ({\n        backgroundImage: 'url(' + record.imgList[0] + ')'\n      })\n    }, [_c('div', {\n      staticClass: \"record-item-wrap\"\n    }, [_c('p', {\n      staticClass: \"record-words\"\n    }, [_vm._v(_vm._s(record.wordsToLynn))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"date-info\"\n    }, [_c('p', {\n      staticClass: \"record-time\"\n    }, [_vm._v(_vm._s(record.time))]), _vm._v(\" \"), _c('p', {\n      staticClass: \"record-position\"\n    }, [_c('span', [_c('img', {\n      attrs: {\n        \"src\": _vm.locationIconSrcWhite\n      }\n    })]), _vm._v(_vm._s(record.location))])], 1)], 1)])\n  }))], 1), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.isEditModel),\n      expression: \"isEditModel\"\n    }],\n    staticClass: \"edit-layout\"\n  }, [_c('div', {\n    staticClass: \"textarea-box\"\n  }, [_c('textarea', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.recordContent.wordsToLynn),\n      expression: \"recordContent.wordsToLynn\"\n    }],\n    attrs: {\n      \"placeholder\": \"给老公的留言~\",\n      \"eventid\": '2'\n    },\n    domProps: {\n      \"value\": (_vm.recordContent.wordsToLynn)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.recordContent.wordsToLynn = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"location-box\"\n  }, [_c('span', [_c('img', {\n    attrs: {\n      \"src\": _vm.locationIconSrc\n    }\n  })]), _vm._v(\" \"), (_vm.locationString === '') ? _c('span', [_vm._v(\"正在获取老婆定位...\")]) : _vm._e(), _vm._v(\" \"), (_vm.locationString !== '') ? _c('span', [_vm._v(_vm._s(_vm.locationString))]) : _vm._e()]), _vm._v(\" \"), _c('h4', {\n    staticClass: \"eat-title\"\n  }, [_vm._v(\"皂片\"), _c('small', [_vm._v(\"我有好好吃饭捏~\")])], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"record-img-preview-layout\"\n  }, [_vm._l((_vm.recordContent.recordImgPreviewList), function(item, index) {\n    return _c('div', {\n      key: item.src,\n      staticClass: \"img-item\"\n    }, [_c('div', {\n      staticClass: \"remove-img\",\n      attrs: {\n        \"eventid\": '3-' + index\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.removeItem(index)\n        }\n      }\n    }), _vm._v(\" \"), _c('img', {\n      staticClass: \"img-preview-item\",\n      attrs: {\n        \"src\": item.src,\n        \"alt\": \"\"\n      }\n    })])\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"img-item\",\n    attrs: {\n      \"eventid\": '4'\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.addImg()\n      }\n    }\n  }, [_c('div', {\n    staticClass: \"img-wrapper\"\n  }, [_c('img', {\n    staticClass: \"img-preview-item add-img-button\",\n    attrs: {\n      \"src\": _vm.addIconSrc,\n      \"alt\": \"\"\n    }\n  })])])], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"submit-layout\"\n  }, [_c('button', {\n    staticClass: \"submit-record\",\n    attrs: {\n      \"eventid\": '5'\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.submitRecord()\n      }\n    }\n  }, [_vm._v(\"提交给老公\")]), _vm._v(\" \"), _c('button', {\n    staticClass: \"submit-return\",\n    attrs: {\n      \"type\": \"success\",\n      \"eventid\": '6'\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.submitReturn()\n      }\n    }\n  }, [_vm._v(\"返回\")])], 1)], 1)])\n}\nvar staticRenderFns = []\nrender._withStripped = true\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n     require(\"vue-loader/node_modules/vue-hot-reload-api\").rerender(\"data-v-5eee63ef\", esExports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.npminstall/mpvue-loader/1.0.4/mpvue-loader/lib/template-compiler?{\"id\":\"data-v-5eee63ef\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/.npminstall/mpvue-loader/1.0.4/mpvue-loader/lib/selector.js?type=template&index=0!./src/pages/eat/index.vue\n// module id = 72\n// module chunks = 3"],"sourceRoot":""}